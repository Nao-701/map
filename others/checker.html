<html lang="ja">
<meta>
<head>
  <title>中田研究室 - 文章添削ツール</title>
</head>
<h2>中田研究室 - 文章添削ツール</h2>
<textarea cols="100" rows="10" wrap=”soft” id="inputText"></textarea>
<br>
<button onclick="checkText()">Check</button>
<div id="warning" style="display:none">NG</div>
<p>Chrome専用です <a href="https://github.com/naohiro701/naohiro701.github.io/blob/main/others/checker.html">コード修正はこちらから</a></p>
</html>

<script type="text/javascript">
function checkText() {
  document.getElementById("warning").style.display = "none";
  const text = document.getElementById("inputText").value;
  const itr = new Intl.v8BreakIterator(['ja-jp'], { type: 'word'});
  itr.adoptText(text);
  let pos = itr.first();


  while(pos != -1) {
    const nextPos = itr.next();
    if(nextPos === -1) { break; }
    const str = text.slice(pos, nextPos);
    check(str)
    pos = nextPos;
    console.log(str)
  }
}
function check(str){
  //漢字とかなの使い分け
  const forbiddenWords = ["良い", "し易い", "内には", "事は", "する迄", "する訳", "と言う", "と言った", "時", "方", "予め", "或いは", "恐らく", "主な", "主に",
  "且つ", "極めて", "様々", "更に", "次第に", "従って", "直ぐに", "既に", "即ち", "全て", "但し", "例えば", "丁度", "付く", "出来る",
  "共に", "取る", "採る", "捕る", "何故", "始めに", "初めに", "果たして", "遥かに", "ひきおこす", "殆ど", "又", "全く", "目指す", "勿論",
  "専ら", "わるい", "分かる", "結び付く", "見出す", "みいだす", "よぶ", "充分", "ふるまう", "振舞う", "なりたつ", "動機付け", "もちいる"];
for (const word of forbiddenWords) {
  //  if (str.includes(word)) { //含む場合
  if (str === word) { // 一致する場合
    document.getElementById("warning").style.display = "block";
    alert("「"+str+'」を修正してください')
    return;
  }
}
}
</script>
